<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_blockdevice_8h_source" xml:lang="en-US">
<title>blockdevice.h</title>
<indexterm><primary>lib/pico-vfs-REGI-Local/include/blockdevice/blockdevice.h</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_blockdevice_8h_source_1l00001"/>00001 <emphasis role="comment">/*</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00002"/>00002 <emphasis role="comment">&#32;*&#32;Copyright&#32;2024,&#32;Hiroyuki&#32;OYAMA</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00003"/>00003 <emphasis role="comment">&#32;*</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00004"/>00004 <emphasis role="comment">&#32;*&#32;SPDX-License-Identifier:&#32;BSD-3-Clause</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00005"/>00005 <emphasis role="comment">&#32;*/</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00006"/>00006 <emphasis role="preprocessor">#pragma&#32;once</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00007"/>00007 
<anchor xml:id="_blockdevice_8h_source_1l00012"/>00012 <emphasis role="preprocessor">#ifdef&#32;__cplusplus</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00013"/>00013 <emphasis role="keyword">extern</emphasis>&#32;<emphasis role="stringliteral">&quot;C&quot;</emphasis>&#32;{
<anchor xml:id="_blockdevice_8h_source_1l00014"/>00014 <emphasis role="preprocessor">#endif</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00015"/>00015 
<anchor xml:id="_blockdevice_8h_source_1l00016"/>00016 <emphasis role="preprocessor">#include&#32;&lt;stdlib.h&gt;</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00017"/>00017 <emphasis role="preprocessor">#include&#32;&lt;stdint.h&gt;</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00018"/>00018 <emphasis role="preprocessor">#include&#32;&lt;stdbool.h&gt;</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00019"/>00019 
<anchor xml:id="_blockdevice_8h_source_1l00020"/><link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">00020</link> <emphasis role="keyword">typedef</emphasis>&#32;uint64_t&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>;
<anchor xml:id="_blockdevice_8h_source_1l00021"/>00021 
<anchor xml:id="_blockdevice_8h_source_1l00022"/><link linkend="_blockdevice_8h_1a6202ecf5974ef985db5f3a2adfd81abb">00022</link> <emphasis role="keyword">enum</emphasis>&#32;<link linkend="_blockdevice_8h_1a6202ecf5974ef985db5f3a2adfd81abb">bd_error</link>&#32;{
<anchor xml:id="_blockdevice_8h_source_1l00023"/><link linkend="_blockdevice_8h_1a6202ecf5974ef985db5f3a2adfd81abba75df174773e6ad20c734b0cee152387c">00023</link> &#32;&#32;&#32;&#32;<link linkend="_blockdevice_8h_1a6202ecf5974ef985db5f3a2adfd81abba75df174773e6ad20c734b0cee152387c">BD_ERROR_OK</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0,&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_blockdevice_8h_source_1l00024"/><link linkend="_blockdevice_8h_1a6202ecf5974ef985db5f3a2adfd81abba228ff6ba36b53da202b8b66b772f4774">00024</link> &#32;&#32;&#32;&#32;<link linkend="_blockdevice_8h_1a6202ecf5974ef985db5f3a2adfd81abba228ff6ba36b53da202b8b66b772f4774">BD_ERROR_DEVICE_ERROR</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;-4001,&#32;
<anchor xml:id="_blockdevice_8h_source_1l00025"/>00025 };
<anchor xml:id="_blockdevice_8h_source_1l00026"/>00026 
<anchor xml:id="_blockdevice_8h_source_1l00032"/><link linkend="_structblockdevice">00032</link> <emphasis role="keyword">typedef</emphasis>&#32;<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;{
<anchor xml:id="_blockdevice_8h_source_1l00033"/><link linkend="_structblockdevice_1ad37adc41062aa442c1f80852285e0b35">00033</link> &#32;&#32;&#32;&#32;int&#32;(*<link linkend="_structblockdevice_1ad37adc41062aa442c1f80852285e0b35">init</link>)(<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;*device);
<anchor xml:id="_blockdevice_8h_source_1l00034"/><link linkend="_structblockdevice_1a49aee7ebd3ba09abcc167ba8b026e2a3">00034</link> &#32;&#32;&#32;&#32;int&#32;(*<link linkend="_structblockdevice_1a49aee7ebd3ba09abcc167ba8b026e2a3">deinit</link>)(<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;*device);
<anchor xml:id="_blockdevice_8h_source_1l00035"/><link linkend="_structblockdevice_1aaff48a348ee1441de6d05ffad85875ee">00035</link> &#32;&#32;&#32;&#32;int&#32;(*<link linkend="_structblockdevice_1aaff48a348ee1441de6d05ffad85875ee">sync</link>)(<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;*device);
<anchor xml:id="_blockdevice_8h_source_1l00036"/><link linkend="_structblockdevice_1ae4801dd67b1481ac013520098523988e">00036</link> &#32;&#32;&#32;&#32;int&#32;(*<link linkend="_structblockdevice_1ae4801dd67b1481ac013520098523988e">read</link>)(<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;*device,&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;*buffer,&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;addr,&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;<link linkend="_structblockdevice_1abba40bbe04d3a88d270634a788249477">size</link>);
<anchor xml:id="_blockdevice_8h_source_1l00037"/><link linkend="_structblockdevice_1a07d24eb0a566f88aa45cf1d236006822">00037</link> &#32;&#32;&#32;&#32;int&#32;(*<link linkend="_structblockdevice_1a07d24eb0a566f88aa45cf1d236006822">program</link>)(<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;*device,&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;*buffer,&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;addr,&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;<link linkend="_structblockdevice_1abba40bbe04d3a88d270634a788249477">size</link>);
<anchor xml:id="_blockdevice_8h_source_1l00038"/><link linkend="_structblockdevice_1aca297cb4c31042de2aeda00a9b8f8196">00038</link> &#32;&#32;&#32;&#32;int&#32;(*<link linkend="_structblockdevice_1aca297cb4c31042de2aeda00a9b8f8196">erase</link>)(<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;*device,&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;addr,&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;<link linkend="_structblockdevice_1abba40bbe04d3a88d270634a788249477">size</link>);
<anchor xml:id="_blockdevice_8h_source_1l00039"/><link linkend="_structblockdevice_1a0326c4dca54ff9e7966053c3aa96adcf">00039</link> &#32;&#32;&#32;&#32;int&#32;(*<link linkend="_structblockdevice_1a0326c4dca54ff9e7966053c3aa96adcf">trim</link>)(<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;*device,&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;addr,&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;<link linkend="_structblockdevice_1abba40bbe04d3a88d270634a788249477">size</link>);
<anchor xml:id="_blockdevice_8h_source_1l00040"/><link linkend="_structblockdevice_1abba40bbe04d3a88d270634a788249477">00040</link> &#32;&#32;&#32;&#32;<link linkend="_blockdevice_8h_1a0457670798518d3ca4a2e67aec5d2cc6">bd_size_t</link>&#32;(*<link linkend="_structblockdevice_1abba40bbe04d3a88d270634a788249477">size</link>)(<emphasis role="keyword">struct&#32;</emphasis><link linkend="_structblockdevice">blockdevice</link>&#32;*device);
<anchor xml:id="_blockdevice_8h_source_1l00041"/><link linkend="_structblockdevice_1a44ac5dc03dd62d3c48abbdbd0c9fed4d">00041</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">size_t</emphasis>&#32;<link linkend="_structblockdevice_1a44ac5dc03dd62d3c48abbdbd0c9fed4d">read_size</link>;
<anchor xml:id="_blockdevice_8h_source_1l00042"/><link linkend="_structblockdevice_1ab4bddfc59b1c4918514f359c4b509dd3">00042</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">size_t</emphasis>&#32;<link linkend="_structblockdevice_1ab4bddfc59b1c4918514f359c4b509dd3">erase_size</link>;
<anchor xml:id="_blockdevice_8h_source_1l00043"/><link linkend="_structblockdevice_1a79e2a5807006883bcbf1f60a91bdaf98">00043</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">size_t</emphasis>&#32;<link linkend="_structblockdevice_1a79e2a5807006883bcbf1f60a91bdaf98">program_size</link>;
<anchor xml:id="_blockdevice_8h_source_1l00044"/><link linkend="_structblockdevice_1ac5845731ff9674fc82a752fbd270130d">00044</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>&#32;*<link linkend="_structblockdevice_1ac5845731ff9674fc82a752fbd270130d">name</link>;
<anchor xml:id="_blockdevice_8h_source_1l00045"/><link linkend="_structblockdevice_1a73a27f59d5175f4a31d4ab3cd2a7e3c0">00045</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;*<link linkend="_structblockdevice_1a73a27f59d5175f4a31d4ab3cd2a7e3c0">config</link>;
<anchor xml:id="_blockdevice_8h_source_1l00046"/><link linkend="_structblockdevice_1a9a2c51cef39211e0d1c42fc3e395caa0">00046</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_structblockdevice_1a9a2c51cef39211e0d1c42fc3e395caa0">is_initialized</link>;
<anchor xml:id="_blockdevice_8h_source_1l00047"/><link linkend="_group__blockdevice_1ga4bc2c146f975b5250be7f8f5f219f5e4">00047</link> }&#32;<link linkend="_group__blockdevice_1ga4bc2c146f975b5250be7f8f5f219f5e4">blockdevice_t</link>;
<anchor xml:id="_blockdevice_8h_source_1l00048"/>00048 
<anchor xml:id="_blockdevice_8h_source_1l00049"/>00049 <emphasis role="preprocessor">#ifdef&#32;__cplusplus</emphasis>
<anchor xml:id="_blockdevice_8h_source_1l00050"/>00050 }
<anchor xml:id="_blockdevice_8h_source_1l00051"/>00051 <emphasis role="preprocessor">#endif</emphasis>
</programlisting></section>
