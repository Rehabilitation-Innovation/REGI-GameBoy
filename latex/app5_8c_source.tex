\doxysection{app5.\+c}
\hypertarget{app5_8c_source}{}\label{app5_8c_source}\index{lib/pico-\/vfs-\/REGI-\/Local/vendor/ff15/documents/res/app5.c@{lib/pico-\/vfs-\/REGI-\/Local/vendor/ff15/documents/res/app5.c}}
\mbox{\hyperlink{app5_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00001}00001\ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\//}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00002}00002\ \textcolor{comment}{/\ Test\ if\ the\ file\ is\ contiguous\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ /}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00003}00003\ \textcolor{comment}{/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00005}\mbox{\hyperlink{app5_8c_a9772009a10ab7b6825e887b38708628a}{00005}}\ \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{FRESULT}}\ \mbox{\hyperlink{app5_8c_a9772009a10ab7b6825e887b38708628a}{test\_contiguous\_file}}\ (}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00006}00006\ \ \ \ \ \mbox{\hyperlink{struct_f_i_l}{FIL}}*\ fp,\ \ \ \ \textcolor{comment}{/*\ [IN]\ \ Open\ file\ object\ to\ be\ checked\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00007}00007\ \ \ \ \ \textcolor{keywordtype}{int}*\ cont\ \ \ \textcolor{comment}{/*\ [OUT]\ 1:Contiguous,\ 0:Fragmented\ or\ zero-\/length\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00008}00008\ )}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00009}00009\ \{}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00010}00010\ \ \ \ \ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ clst,\ clsz,\ step;}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00011}00011\ \ \ \ \ \mbox{\hyperlink{ff_8h_a3fc0992ad7436250b6b1a0592214b7f2}{FSIZE\_t}}\ fsz;}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00012}00012\ \ \ \ \ \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{FRESULT}}\ fr;}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00015}00015\ \ \ \ \ *cont\ =\ 0;}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00016}00016\ \ \ \ \ fr\ =\ \mbox{\hyperlink{ff_8h_ae4caf47dd5cbc123b61d35542481b1be}{f\_rewind}}(fp);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Validates\ and\ prepares\ the\ file\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00017}00017\ \ \ \ \ \textcolor{keywordflow}{if}\ (fr\ !=\ \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1}{FR\_OK}})\ \textcolor{keywordflow}{return}\ fr;}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00019}00019\ \textcolor{preprocessor}{\#if\ FF\_MAX\_SS\ ==\ FF\_MIN\_SS}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00020}00020\ \ \ \ \ clsz\ =\ (\mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}})fp-\/>\mbox{\hyperlink{struct_f_i_l_ad95b6e85106673b0d7a1855da4d264f4}{obj}}.\mbox{\hyperlink{struct_f_f_o_b_j_i_d_a867089659a2374d44ab917c60037fe5c}{fs}}-\/>\mbox{\hyperlink{struct_f_a_t_f_s_ad7fa7a509f8d097a9ab182d6c47be568}{csize}}\ *\ \mbox{\hyperlink{ffconf_8h_a104c36ee46f9d6e76dadf37f3d9696cc}{FF\_MAX\_SS}};\ \ \ \ \textcolor{comment}{/*\ Cluster\ size\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00021}00021\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00022}00022\ \ \ \ \ clsz\ =\ (\mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}})fp-\/>\mbox{\hyperlink{struct_f_i_l_ad95b6e85106673b0d7a1855da4d264f4}{obj}}.\mbox{\hyperlink{struct_f_f_o_b_j_i_d_a867089659a2374d44ab917c60037fe5c}{fs}}-\/>\mbox{\hyperlink{struct_f_a_t_f_s_ad7fa7a509f8d097a9ab182d6c47be568}{csize}}\ *\ fp-\/>\mbox{\hyperlink{struct_f_i_l_ad95b6e85106673b0d7a1855da4d264f4}{obj}}.\mbox{\hyperlink{struct_f_f_o_b_j_i_d_a867089659a2374d44ab917c60037fe5c}{fs}}-\/>ssize;}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00023}00023\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00024}00024\ \ \ \ \ fsz\ =\ \mbox{\hyperlink{ff_8h_a26f33722c5bf1aa3cd6f0290a83eb2bc}{f\_size}}(fp);}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00025}00025\ \ \ \ \ \textcolor{keywordflow}{if}\ (fsz\ >\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00026}00026\ \ \ \ \ \ \ \ \ clst\ =\ fp-\/>\mbox{\hyperlink{struct_f_i_l_ad95b6e85106673b0d7a1855da4d264f4}{obj}}.\mbox{\hyperlink{struct_f_f_o_b_j_i_d_ad990393e2ddf16f73671ded4b751becb}{sclust}}\ -\/\ 1;\ \ \textcolor{comment}{/*\ A\ cluster\ leading\ the\ first\ cluster\ for\ first\ test\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00027}00027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (fsz)\ \{}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00028}00028\ \ \ \ \ \ \ \ \ \ \ \ \ step\ =\ (fsz\ >=\ clsz)\ ?\ clsz\ :\ (\mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}})fsz;}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00029}00029\ \ \ \ \ \ \ \ \ \ \ \ \ fr\ =\ \mbox{\hyperlink{ff_8c_a7c4bcf81d9122f0b5376852ec6a8c3eb}{f\_lseek}}(fp,\ \mbox{\hyperlink{ff_8h_a5e1daca7ce13cdc277e42185f7f9124f}{f\_tell}}(fp)\ +\ step);\ \ \ \ \textcolor{comment}{/*\ Advances\ file\ pointer\ a\ cluster\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fr\ !=\ \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1}{FR\_OK}})\ \textcolor{keywordflow}{return}\ fr;}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clst\ +\ 1\ !=\ fp-\/>\mbox{\hyperlink{struct_f_i_l_aa41312aba551b9a6d1c9d3c8c7d2734b}{clust}})\ \textcolor{keywordflow}{break};\ \ \ \ \ \ \ \textcolor{comment}{/*\ Is\ not\ the\ cluster\ next\ to\ previous\ one?\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ clst\ =\ fp-\/>\mbox{\hyperlink{struct_f_i_l_aa41312aba551b9a6d1c9d3c8c7d2734b}{clust}};\ fsz\ -\/=\ step;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Get\ current\ cluster\ for\ next\ test\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00033}00033\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00034}00034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fsz\ ==\ 0)\ *cont\ =\ 1;\ \ \ \ \textcolor{comment}{/*\ All\ done\ without\ fail?\ */}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00035}00035\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1}{FR\_OK}};}
\DoxyCodeLine{\Hypertarget{app5_8c_source_l00038}00038\ \}}

\end{DoxyCode}
