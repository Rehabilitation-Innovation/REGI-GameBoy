\doxysubsection{blockdevice\+\_\+heap }
\hypertarget{group__blockdevice__heap}{}\label{group__blockdevice__heap}\index{blockdevice\_heap@{blockdevice\_heap}}


Heap memory block device.  


\doxysubsubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__blockdevice_ga4bc2c146f975b5250be7f8f5f219f5e4}{blockdevice\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{group__blockdevice__heap_ga9500b5327f9bf0e2bf3ca11ec122748f}{blockdevice\+\_\+heap\+\_\+create}} (size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Create RAM heap memory block device. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__blockdevice__heap_ga6d78ccbc7b18231fadf2dd61c42f2a84}{blockdevice\+\_\+heap\+\_\+free}} (\mbox{\hyperlink{group__blockdevice_ga4bc2c146f975b5250be7f8f5f219f5e4}{blockdevice\+\_\+t}} \texorpdfstring{$\ast$}{*}device)
\begin{DoxyCompactList}\small\item\em Release the heap memory device. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
Heap memory block device. 



\label{doc-func-members}
\Hypertarget{group__blockdevice__heap_doc-func-members}
\doxysubsubsection{Function Documentation}
\Hypertarget{group__blockdevice__heap_ga9500b5327f9bf0e2bf3ca11ec122748f}\index{blockdevice\_heap@{blockdevice\_heap}!blockdevice\_heap\_create@{blockdevice\_heap\_create}}
\index{blockdevice\_heap\_create@{blockdevice\_heap\_create}!blockdevice\_heap@{blockdevice\_heap}}
\doxysubsubsubsection{\texorpdfstring{blockdevice\_heap\_create()}{blockdevice\_heap\_create()}}
{\footnotesize\ttfamily \label{group__blockdevice__heap_ga9500b5327f9bf0e2bf3ca11ec122748f} 
\mbox{\hyperlink{group__blockdevice_ga4bc2c146f975b5250be7f8f5f219f5e4}{blockdevice\+\_\+t}} \texorpdfstring{$\ast$}{*} blockdevice\+\_\+heap\+\_\+create (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size}{}\end{DoxyParamCaption})}



Create RAM heap memory block device. 

Create a block device object that uses RAM heap memory. The size of heap memory allocated to the block device is specified by size.


\begin{DoxyParams}{Parameters}
{\em size} & Size in bytes to be allocated to the block device. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Block device object. Returnes NULL in case of failure. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em NULL} & Failed to create block device object. \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{heap_8c_source_l00118}{118}} of file \mbox{\hyperlink{heap_8c_source}{heap.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00119\ \ \ \ \ \mbox{\hyperlink{group__blockdevice_ga4bc2c146f975b5250be7f8f5f219f5e4}{blockdevice\_t}}\ *device\ =\ calloc(1,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{group__blockdevice_ga4bc2c146f975b5250be7f8f5f219f5e4}{blockdevice\_t}}));}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{if}\ (device\ ==\ NULL)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \mbox{\hyperlink{structblockdevice__heap__config__t}{blockdevice\_heap\_config\_t}}\ *config\ =\ calloc(1,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structblockdevice__heap__config__t}{blockdevice\_heap\_config\_t}}));}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{if}\ (config\ ==\ NULL)\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ free(device);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{00127\ \ \ \ \ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_ad37adc41062aa442c1f80852285e0b35}{init}}\ =\ init;}
\DoxyCodeLine{00130\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_a49aee7ebd3ba09abcc167ba8b026e2a3}{deinit}}\ =\ deinit;}
\DoxyCodeLine{00131\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_ae4801dd67b1481ac013520098523988e}{read}}\ =\ read;}
\DoxyCodeLine{00132\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_aca297cb4c31042de2aeda00a9b8f8196}{erase}}\ =\ erase;}
\DoxyCodeLine{00133\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_a07d24eb0a566f88aa45cf1d236006822}{program}}\ =\ program;}
\DoxyCodeLine{00134\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_a0326c4dca54ff9e7966053c3aa96adcf}{trim}}\ =\ trim;}
\DoxyCodeLine{00135\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_aaff48a348ee1441de6d05ffad85875ee}{sync}}\ =\ sync;}
\DoxyCodeLine{00136\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_abba40bbe04d3a88d270634a788249477}{size}}\ =\ size;}
\DoxyCodeLine{00137\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_a44ac5dc03dd62d3c48abbdbd0c9fed4d}{read\_size}}\ =\ \mbox{\hyperlink{heap_8c_adec7dde74afae904fe3e92031e8e0528}{PICO\_VFS\_BLOCKDEVICE\_HEAP\_BLOCK\_SIZE}};}
\DoxyCodeLine{00138\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_ab4bddfc59b1c4918514f359c4b509dd3}{erase\_size}}\ =\ \mbox{\hyperlink{heap_8c_adec7dde74afae904fe3e92031e8e0528}{PICO\_VFS\_BLOCKDEVICE\_HEAP\_BLOCK\_SIZE}};}
\DoxyCodeLine{00139\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_a79e2a5807006883bcbf1f60a91bdaf98}{program\_size}}\ =\ \mbox{\hyperlink{heap_8c_adec7dde74afae904fe3e92031e8e0528}{PICO\_VFS\_BLOCKDEVICE\_HEAP\_BLOCK\_SIZE}};}
\DoxyCodeLine{00140\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_ac5845731ff9674fc82a752fbd270130d}{name}}\ =\ DEVICE\_NAME;}
\DoxyCodeLine{00141\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_a9a2c51cef39211e0d1c42fc3e395caa0}{is\_initialized}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ config-\/>\mbox{\hyperlink{structblockdevice__heap__config__t_a2b40e507aea7e8bead5af0f57743ded2}{size}}\ =\ length;}
\DoxyCodeLine{00144\ \ \ \ \ config-\/>\mbox{\hyperlink{structblockdevice__heap__config__t_a6e738b8be364561c6def99dde8ed808f}{heap}}\ =\ NULL;}
\DoxyCodeLine{00145\ \ \ \ \ mutex\_init(\&config-\/>\mbox{\hyperlink{structblockdevice__heap__config__t_a50c07f8849843d2c268963e50553901d}{\_mutex}});}
\DoxyCodeLine{00146\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_a73a27f59d5175f4a31d4ab3cd2a7e3c0}{config}}\ =\ config;}
\DoxyCodeLine{00147\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_ad37adc41062aa442c1f80852285e0b35}{init}}(device);}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{return}\ device;}
\DoxyCodeLine{00149\ \}}

\end{DoxyCode}
\Hypertarget{group__blockdevice__heap_ga6d78ccbc7b18231fadf2dd61c42f2a84}\index{blockdevice\_heap@{blockdevice\_heap}!blockdevice\_heap\_free@{blockdevice\_heap\_free}}
\index{blockdevice\_heap\_free@{blockdevice\_heap\_free}!blockdevice\_heap@{blockdevice\_heap}}
\doxysubsubsubsection{\texorpdfstring{blockdevice\_heap\_free()}{blockdevice\_heap\_free()}}
{\footnotesize\ttfamily \label{group__blockdevice__heap_ga6d78ccbc7b18231fadf2dd61c42f2a84} 
void blockdevice\+\_\+heap\+\_\+free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__blockdevice_ga4bc2c146f975b5250be7f8f5f219f5e4}{blockdevice\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{device}{}\end{DoxyParamCaption})}



Release the heap memory device. 


\begin{DoxyParams}{Parameters}
{\em device} & Block device object. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{heap_8c_source_l00151}{151}} of file \mbox{\hyperlink{heap_8c_source}{heap.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00152\ \ \ \ \ device-\/>\mbox{\hyperlink{structblockdevice_a49aee7ebd3ba09abcc167ba8b026e2a3}{deinit}}(device);}
\DoxyCodeLine{00153\ \ \ \ \ free(device-\/>\mbox{\hyperlink{structblockdevice_a73a27f59d5175f4a31d4ab3cd2a7e3c0}{config}});}
\DoxyCodeLine{00154\ \ \ \ \ free(device);}
\DoxyCodeLine{00155\ \}}

\end{DoxyCode}
