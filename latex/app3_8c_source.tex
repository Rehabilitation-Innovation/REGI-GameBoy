\doxysection{app3.\+c}
\hypertarget{app3_8c_source}{}\label{app3_8c_source}\index{lib/pico-\/vfs-\/REGI-\/Local/vendor/ff15/documents/res/app3.c@{lib/pico-\/vfs-\/REGI-\/Local/vendor/ff15/documents/res/app3.c}}
\mbox{\hyperlink{app3_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00001}00001\ \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\//}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00002}00002\ \textcolor{comment}{/\ Allocate\ a\ contiguous\ area\ to\ the\ file}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00003}00003\ \textcolor{comment}{/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\//}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00004}00004\ \textcolor{comment}{/\ This\ function\ checks\ if\ the\ file\ is\ contiguous\ with\ desired\ size.}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00005}00005\ \textcolor{comment}{/\ If\ not,\ a\ block\ of\ contiguous\ sectors\ is\ allocated\ to\ the\ file.}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00006}00006\ \textcolor{comment}{/\ If\ the\ file\ has\ been\ opened\ without\ FA\_WRITE\ flag,\ it\ only\ checks\ if}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00007}00007\ \textcolor{comment}{/\ the\ file\ is\ contiguous\ and\ returns\ the\ resulut.}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00008}00008\ \textcolor{comment}{/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\//}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00009}00009\ \textcolor{comment}{/\ This\ function\ can\ work\ with\ FatFs\ R0.09\ -\/\ R0.11a.}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00010}00010\ \textcolor{comment}{/\ It\ is\ incompatible\ with\ R0.12+.\ Use\ f\_expand\ function\ instead.}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00011}00011\ \textcolor{comment}{/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00013}00013\ \textcolor{comment}{/*\ Declarations\ of\ FatFs\ internal\ functions\ accessible\ from\ applications.}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00014}00014\ \textcolor{comment}{/\ \ This\ is\ intended\ to\ be\ used\ for\ disk\ checking/fixing\ or\ dirty\ hacks\ :-\/)\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00015}\mbox{\hyperlink{app3_8c_a7519abb60fe91f6aa1d17f64fbae123a}{00015}}\ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ \mbox{\hyperlink{app3_8c_a7519abb60fe91f6aa1d17f64fbae123a}{clust2sect}}\ (\mbox{\hyperlink{struct_f_a_t_f_s}{FATFS}}*\ fs,\ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ clst);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00016}\mbox{\hyperlink{app3_8c_a65611adf1626e5e08da77cd33a98dd8b}{00016}}\ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ \mbox{\hyperlink{app3_8c_a65611adf1626e5e08da77cd33a98dd8b}{get\_fat}}\ (\mbox{\hyperlink{struct_f_a_t_f_s}{FATFS}}*\ fs,\ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ clst);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00017}\mbox{\hyperlink{app3_8c_abd4b6b071a8d728a88727051c12bc6d7}{00017}}\ \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{FRESULT}}\ \mbox{\hyperlink{app3_8c_abd4b6b071a8d728a88727051c12bc6d7}{put\_fat}}\ (\mbox{\hyperlink{struct_f_a_t_f_s}{FATFS}}*\ fs,\ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ clst,\ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ val);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00020}\mbox{\hyperlink{app3_8c_a93a18e2a0a10c54e2911d39b95cca157}{00020}}\ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ \mbox{\hyperlink{app3_8c_a93a18e2a0a10c54e2911d39b95cca157}{allocate\_contiguous\_clusters}}\ (\ \ \ \ \textcolor{comment}{/*\ Returns\ the\ first\ sector\ in\ LBA\ (0:error\ or\ not\ contiguous)\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00021}00021\ \ \ \ \ \mbox{\hyperlink{struct_f_i_l}{FIL}}*\ fp,\ \ \ \ \textcolor{comment}{/*\ Pointer\ to\ the\ open\ file\ object\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00022}00022\ \ \ \ \ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ len\ \ \ \textcolor{comment}{/*\ Number\ of\ bytes\ to\ allocate\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00023}00023\ )}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00024}00024\ \{}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00025}00025\ \ \ \ \ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ csz,\ tcl,\ ncl,\ ccl,\ cl;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00028}00028\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ff_8c_a7c4bcf81d9122f0b5376852ec6a8c3eb}{f\_lseek}}(fp,\ 0)\ ||\ !len)\ \ \ \ \ \textcolor{comment}{/*\ Check\ if\ the\ given\ parameters\ are\ valid\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00029}00029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00030}00030\ \ \ \ \ csz\ =\ 512UL\ *\ fp-\/>fs-\/>csize;\ \ \ \ \textcolor{comment}{/*\ Cluster\ size\ in\ unit\ of\ byte\ (assuming\ 512\ bytes/sector)\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00031}00031\ \ \ \ \ tcl\ =\ (len\ +\ csz\ -\/\ 1)\ /\ csz;\ \ \ \ \textcolor{comment}{/*\ Total\ number\ of\ clusters\ required\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00032}00032\ \ \ \ \ len\ =\ tcl\ *\ csz;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Round-\/up\ file\ size\ to\ the\ cluster\ boundary\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00034}00034\ \ \ \ \ \textcolor{comment}{/*\ Check\ if\ the\ existing\ cluster\ chain\ is\ contiguous\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00035}00035\ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ ==\ fp-\/>fsize)\ \{}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00036}00036\ \ \ \ \ \ \ \ \ ncl\ =\ 0;\ ccl\ =\ fp-\/>sclust;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00037}00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ cl\ =\ \mbox{\hyperlink{app3_8c_a65611adf1626e5e08da77cd33a98dd8b}{get\_fat}}(fp-\/>fs,\ ccl);\ \ \textcolor{comment}{/*\ Get\ the\ cluster\ status\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cl\ +\ 1\ <\ 3)\ \textcolor{keywordflow}{return}\ 0;\ \ \ \textcolor{comment}{/*\ Hard\ error?\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cl\ !=\ ccl\ +\ 1\ \&\&\ cl\ <\ fp-\/>fs-\/>n\_fatent)\ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Not\ contiguous?\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ ccl\ =\ cl;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00042}00042\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (++ncl\ <\ tcl);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00043}00043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ncl\ ==\ tcl)\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Is\ the\ file\ contiguous?\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{app3_8c_a7519abb60fe91f6aa1d17f64fbae123a}{clust2sect}}(fp-\/>fs,\ fp-\/>sclust);\ \ \textcolor{comment}{/*\ File\ is\ contiguous.\ Return\ the\ start\ sector\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00045}00045\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00047}00047\ \ \ \ \ \textcolor{comment}{/*\ File\ is\ not\ contiguous\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00048}00048\ \textcolor{preprocessor}{\#if\ \_FS\_READONLY}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00049}00049\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Exit\ if\ in\ read-\/only\ cfg.\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00050}00050\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00051}00051\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(fp-\/>\mbox{\hyperlink{struct_f_i_l_ac409508881f5a16f2998ae675072b376}{flag}}\ \&\ \mbox{\hyperlink{ff_8h_afa366963220c89b882c0361794020c14}{FA\_WRITE}}))\ \textcolor{keywordflow}{return}\ 0;\ \ \ \textcolor{comment}{/*\ Exit\ if\ the\ file\ object\ is\ for\ read-\/only\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00053}00053\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ff_8c_a691a27b40c348f7c84b42e911636f38a}{f\_truncate}}(fp))\ \textcolor{keywordflow}{return}\ 0;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Remove\ the\ non-\/contiguous\ chain\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00055}00055\ \ \ \ \ \textcolor{comment}{/*\ Find\ a\ free\ contiguous\ area\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00056}00056\ \ \ \ \ ccl\ =\ cl\ =\ 2;\ ncl\ =\ 0;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00057}00057\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00058}00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cl\ >=\ fp-\/>fs-\/>n\_fatent)\ \textcolor{keywordflow}{return}\ 0;\ \ \ \textcolor{comment}{/*\ No\ contiguous\ area\ is\ found.\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00059}00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{app3_8c_a65611adf1626e5e08da77cd33a98dd8b}{get\_fat}}(fp-\/>fs,\ cl))\ \{\ \ \textcolor{comment}{/*\ Encounterd\ a\ cluster\ in\ use\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{\ \ \ \ \textcolor{comment}{/*\ Skip\ the\ block\ of\ used\ clusters\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cl++;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cl\ >=\ fp-\/>fs-\/>n\_fatent)\ \textcolor{keywordflow}{return}\ 0;\ \ \ \textcolor{comment}{/*\ No\ contiguous\ area\ is\ found.\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{app3_8c_a65611adf1626e5e08da77cd33a98dd8b}{get\_fat}}(fp-\/>fs,\ cl));}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ ccl\ =\ cl;\ ncl\ =\ 0;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00065}00065\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00066}00066\ \ \ \ \ \ \ \ \ cl++;\ ncl++;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00067}00067\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (ncl\ <\ tcl);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00069}00069\ \ \ \ \ \textcolor{comment}{/*\ Create\ a\ contiguous\ cluster\ chain\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00070}00070\ \ \ \ \ fp-\/>fs-\/>last\_clust\ =\ ccl\ -\/\ 1;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00071}00071\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ff_8c_a7c4bcf81d9122f0b5376852ec6a8c3eb}{f\_lseek}}(fp,\ len))\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00073}00073\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{app3_8c_a7519abb60fe91f6aa1d17f64fbae123a}{clust2sect}}(fp-\/>fs,\ fp-\/>sclust);\ \ \textcolor{comment}{/*\ Return\ file\ start\ sector\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00074}00074\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00075}00075\ \}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00078}\mbox{\hyperlink{app3_8c_a840291bc02cba5474a4cb46a9b9566fe}{00078}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{app3_8c_a840291bc02cba5474a4cb46a9b9566fe}{main}}\ (\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00079}00079\ \{}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00080}00080\ \ \ \ \ \mbox{\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{FRESULT}}\ fr;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00081}00081\ \ \ \ \ \mbox{\hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{DRESULT}}\ dr;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00082}00082\ \ \ \ \ \mbox{\hyperlink{struct_f_a_t_f_s}{FATFS}}\ fs;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00083}00083\ \ \ \ \ \mbox{\hyperlink{struct_f_i_l}{FIL}}\ fil;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00084}00084\ \ \ \ \ \mbox{\hyperlink{ff_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}\ org;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00085}00085\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00087}00087\ \ \ \ \ \textcolor{comment}{/*\ Open\ or\ create\ a\ file\ to\ write\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00088}00088\ \ \ \ \ \mbox{\hyperlink{ff_8c_a16a934c2bbfa2160295810adc49d5509}{f\_mount}}(\&fs,\ \textcolor{stringliteral}{"{}"{}},\ 0);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00089}00089\ \ \ \ \ fr\ =\ \mbox{\hyperlink{ff_8c_aefdef7126128d99d0b3bd82c28e54d80}{f\_open}}(\&fil,\ \textcolor{stringliteral}{"{}fastrec.log"{}},\ \mbox{\hyperlink{ff_8h_a1f4f3530ff03abbd979b072536e72290}{FA\_READ}}\ |\ \mbox{\hyperlink{ff_8h_afa366963220c89b882c0361794020c14}{FA\_WRITE}}\ |\ \mbox{\hyperlink{ff_8h_a17b01553029920ac0468912b4bcb16c7}{FA\_OPEN\_ALWAYS}});}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00090}00090\ \ \ \ \ \textcolor{keywordflow}{if}\ (fr)\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00092}00092\ \ \ \ \ \textcolor{comment}{/*\ Check\ if\ the\ file\ is\ 256MB\ in\ size\ and\ occupies\ a\ contiguous\ area.}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00093}00093\ \textcolor{comment}{\ \ \ \ /\ \ If\ not,\ a\ contiguous\ area\ will\ be\ re-\/allocated\ to\ the\ file.\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00094}00094\ \ \ \ \ org\ =\ \mbox{\hyperlink{app3_8c_a93a18e2a0a10c54e2911d39b95cca157}{allocate\_contiguous\_clusters}}(\&fil,\ 0x10000000);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00095}00095\ \ \ \ \ \textcolor{keywordflow}{if}\ (!org)\ \{}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00096}00096\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Function\ failed\ due\ to\ any\ error\ or\ insufficient\ contiguous\ area.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00097}00097\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ff_8c_a53882db20ef4323dcfd1874d7733ffc3}{f\_close}}(\&fil);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00099}00099\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00101}00101\ \ \ \ \ \textcolor{comment}{/*\ Now\ you\ can\ read/write\ the\ file\ without\ filesystem\ layer.\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00102}00102\ \ \ \ \ ...}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00103}00103\ \ \ \ \ dr\ =\ \mbox{\hyperlink{fat_8c_ac24448955ef914f54a499df1fb45689d}{disk\_write}}(fil.fs-\/>drv,\ Buff,\ org,\ 1024);\ \ \ \textcolor{comment}{/*\ Write\ 512KiB\ from\ top\ of\ the\ file\ */}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00104}00104\ \ \ \ \ ...}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00106}00106\ \ \ \ \ \mbox{\hyperlink{ff_8c_a53882db20ef4323dcfd1874d7733ffc3}{f\_close}}(\&fil);}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00107}00107\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00108}00108\ \}}
\DoxyCodeLine{\Hypertarget{app3_8c_source_l00109}00109\ }

\end{DoxyCode}
